# Settings in the [build] context are global and are applied to all contexts
# unless otherwise overridden by more specific contexts.
[build]
  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, include it in the publish directory path.
  publish = "dist/"

  # Default build command.
  command = "npm run build"

  environment = { SANITY_STUDIO_API_DATASET = 'develop' }

[[plugins]]
  package = "/netlify-plugins/sanity-studio-deploy"

[context.production]
  environment = { SANITY_STUDIO_API_DATASET = 'production' }

[context.staging]
  environment = { SANITY_STUDIO_API_DATASET = 'staging', SANITY_STUDIO_SITE_URL = 'https://staging--skydio.netlify.app' }

[context.qa]
  environment = { SANITY_STUDIO_API_DATASET = 'qa', SANITY_STUDIO_SITE_URL = 'https://qa--skydio.netlify.app' }

[[redirects]]
  from = "/*"
  to = "/"
  status = 200
